<script type="text/x-red" data-template-name="slackStatus">
    <div class="form-row">
        <label for="node-input-slackCertificate"><i class="fa fa-user"></i> Slack</label>
        <input type="text" id="node-input-slackCertificate">
    </div>
    <div class="form-row">
        <label for="node-input-childpath"><i class="fa fa-sitemap"></i>User Presence</label>
        <input type="text" id="node-input-childpath" placeholder="">
    </div>
    <div class="form-row">
        <label for="node-input-emoji">Emoji</label>
        <select id="node-input-emoji" type="text" style="width:70%" text-center>
            <option style="background-image:url('https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/120/google/241/spiral-calendar_1f5d3.png'); width:20px; height:20px;" value=":spiral_calendar_pad:" default>Calendar</option>
            <option value=":bus:">Commuting</option>
            <option value=":face_with_thermometer:">Out sick</option>
            <option value=":palm_tree:">Vacationing</option>
            <option value="msg.method">[msg.method]</option>
        </select>
    </div> 
</script>

<script type="text/x-red" data-help-name="slackStatus">
    <p>Slack status</p>
</script>


<script type="text/javascript">
    RED.nodes.registerType('slackStatus', {
        category: 'Slack',
        color: "#fdd0a2",
        defaults: {
            slackCertificate: { type: 'slackCertificate', required: true },
            accesstoken: { value: "" },
            data: { value: "" },
            childpath: { value: "", validate: RED.validators.typedInput("propertyType") },
            propertyType: { value: "str" },
            method: { value: 'get', required: true },
            newchildpath: { value: "" }
        },
        inputs: 1,
        outputs: 1,
        icon: "slack.png",
        align: "left",
        label: 'Slack status',
        paletteLabel: 'Slack status',
        oneditprepare: function () {
            $("#node-input-childpath").typedInput({ default: this.propertyType || 'str', types: ['str', 'msg', 'flow', 'global'] });
        },
        oneditsave: function () {
            this.propertyType = $("#node-input-childpath").typedInput('type');
        }
    });
</script>